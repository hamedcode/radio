<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>

<style>
:root{
  --bg:#121212;
  --card:#1d1d1d;
  --accent:#00ffa6;
  --text:#eee;
  --header:#151515;
  --muted:rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto;
  direction:rtl;
  background:var(--bg);
  color:var(--text);
}

/* ===== TOP BAR ===== */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:var(--header);
  border-bottom:1px solid var(--muted);
  position:sticky;
  top:0;
  z-index:1500;
}
.title{font-size:20px}

/* iOS switch */
.switch{
  width:46px;height:24px;
  border-radius:50px;
  background:#555;
  position:relative;
  cursor:pointer;
  transition:.25s;
}
.switch-circle{
  width:20px;height:20px;
  background:white;
  border-radius:50%;
  position:absolute;
  top:2px;left:2px;
  transition:.25s;
}
.switch.on{background:var(--accent)}
.switch.on .switch-circle{left:24px}

/* Color picker */
.color-picker{display:flex;gap:8px}
.color-swatch{
  width:22px;height:22px;
  border-radius:50%;
  cursor:pointer;
  border:2px solid rgba(255,255,255,0.1);
}
.color-swatch.selected{
  outline:2px solid #fff;
  transform:scale(1.1);
}

/* ===== CHANNEL LIST ===== */
.cols{
  display:flex;
  gap:18px;
  padding:16px;
  max-width:1100px;
  margin:12px auto 170px auto;
}
.col{flex:1}

.category{
  background:var(--card);
  padding:10px 14px;
  border-radius:8px;
  margin-bottom:12px;
  font-size:18px;
}

.station-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.station{
  background:var(--card);
  border-radius:10px;
  padding:10px;
  display:flex;
  justify-content:space-between;
  cursor:pointer;
}
.station:hover{background:rgba(255,255,255,0.05)}
.left{display:flex;align-items:center;gap:12px}
.station img{
  width:44px;height:44px;
  border-radius:6px;
  object-fit:cover;
}
.name{font-weight:600}

.station button{
  background:var(--accent);
  border:none;
  padding:8px 10px;
  border-radius:8px;
  cursor:pointer;
  color:#000;
}

/* ===== PLAYER ===== */
.player-box{
  position:fixed;
  bottom:0;left:0;right:0;
  padding:12px;
  background:var(--card);
  border-top:3px solid var(--accent);
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:2000;
  box-shadow:0 -6px 25px rgba(0,0,0,0.6);
}

#eq{
  width:100%;height:60px;
  background:#000;border-radius:6px;
}

.player-controls{
  display:flex;
  gap:12px;
  align-items:center;
}
.player-title{
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

@media(max-width:900px){
  .cols{flex-direction:column;margin-bottom:230px}
  #eq{height:45px}
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="title">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <div style="display:flex;align-items:center;gap:14px">
    <div id="themeSwitch" class="switch">
      <div class="switch-circle"></div>
    </div>

    <div class="color-picker" id="colorPicker">
      <div class="color-swatch selected" data-color="#00ffa6" style="background:#00ffa6"></div>
      <div class="color-swatch" data-color="#00aaff" style="background:#00aaff"></div>
      <div class="color-swatch" data-color="#ffcc00" style="background:#ffcc00"></div>
      <div class="color-swatch" data-color="#ff4444" style="background:#ff4444"></div>
      <div class="color-swatch" data-color="#c95bff" style="background:#c95bff"></div>
    </div>
  </div>
</div>

<!-- CHANNEL LIST -->
<div class="cols">
  <div class="col">
    <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
    <div class="station-list" id="cat_tr"></div>
  </div>

  <div class="col">
    <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
    <div class="station-list" id="cat_fa"></div>
  </div>
</div>

<!-- PLAYER -->
<div class="player-box">
  <canvas id="eq"></canvas>

  <div class="player-controls">
    <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>

    Ø­Ø¬Ù…:
    <input id="volume" type="range" min="0" max="1" value="1" step="0.01">

    <button id="stopBtn">â¹ ØªÙˆÙ‚Ù</button>
  </div>
</div>

<script>
/* ====================== */
/*      CHANNEL DATA      */
/* ====================== */
const channelsTR = [
  {name:"Radio TÃ¼rk 1", url:"https://stream.zeno.fm/yourstream1", logo:"https://stream.zeno.fm/logos/zeno.png"},
  {name:"Radio TÃ¼rk 2", url:"https://stream.zeno.fm/yourstream2", logo:"https://stream.zeno.fm/logos/zeno.png"},
];

const channelsFA = [
  {name:"Ø±Ø§Ø¯ÛŒÙˆ Ø¬ÙˆØ§Ù†", url:"https://stream.zeno.fm/9svfnobkrxrvv", logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/eNYSMBmJNoW6_hcdkosiReSKOx7HHLAn7fP6Tso3DWc/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjAxZGE3MmItNWFhYy00OWU5LWEzN2YtM2IzYjZjZjZmZjQxL2ltYWdlLz91PTE3NjMxNjAxMzcwMDA.webp"},
  {name:"Ø±Ø§Ø¯ÛŒÙˆ Ù¾Ø§Ù¾ ÙØ§Ø±Ø³ÛŒ", url:"https://stream.zeno.fm/yourstream4", logo:"https://stream.zeno.fm/logos/zeno.png"},
];

function createList(list, target){
  target.innerHTML = "";
  list.forEach(ch=>{
    const el = document.createElement("div");
    el.className="station";

    el.innerHTML = `
      <div class="left">
        <img src="${ch.logo}" referrerpolicy="no-referrer">
        <div class="name">${ch.name}</div>
      </div>
      <button>Ù¾Ø®Ø´</button>
    `;
    el.querySelector("button").onclick = ()=>playChannel(ch);
    target.appendChild(el);
  });
}

createList(channelsTR, document.getElementById("cat_tr"));
createList(channelsFA, document.getElementById("cat_fa"));

/* ====================== */
/*        PLAYER          */
/* ====================== */
let audio = new Audio();
audio.crossOrigin = "anonymous";

let ctx = new AudioContext();
let src = ctx.createMediaElementSource(audio);
let analyser = ctx.createAnalyser();
analyser.fftSize = 256;
analyser.smoothingTimeConstant = 0.55;
src.connect(analyser);
analyser.connect(ctx.destination);

const eq = document.getElementById("eq");
const eqCtx = eq.getContext("2d");

function playChannel(ch){
  audio.src = ch.url;
  audio.play();

  document.getElementById("nowPlaying").textContent = ch.name;
}

document.getElementById("stopBtn").onclick = ()=>audio.pause();
document.getElementById("volume").oninput = e => audio.volume = e.target.value;

/* EQ Draw */
function draw(){
  requestAnimationFrame(draw);

  const buffer = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(buffer);

  const W = eq.width = eq.clientWidth;
  const H = eq.height = eq.clientHeight;

  eqCtx.fillStyle = "#000";
  eqCtx.fillRect(0,0,W,H);

  const usable = Math.floor(buffer.length * 0.80);
  const barW = (W / usable) * 1.8;
  let x = 0;

  const accent = getComputedStyle(document.documentElement).getPropertyValue("--accent").trim();

  for(let i=0;i<usable;i++){
    const val = buffer[i]/255;
    const h = val*H;

    eqCtx.fillStyle = accent;
    eqCtx.fillRect(x, H-h, barW, h);

    x += barW+1;
  }
}
draw();

/* ====================== */
/*   THEME + ACCENT       */
/* ====================== */
const sw = document.getElementById("themeSwitch");

function applyDark(){
  document.documentElement.style.setProperty("--bg","#121212");
  document.documentElement.style.setProperty("--card","#1d1d1d");
  document.documentElement.style.setProperty("--header","#151515");
  document.documentElement.style.setProperty("--text","#eee");
  document.documentElement.style.setProperty("--muted","rgba(255,255,255,0.06)");
}
function applyLight(){
  document.documentElement.style.setProperty("--bg","#e5e7eb");
  document.documentElement.style.setProperty("--card","#e9ecf0");
  document.documentElement.style.setProperty("--header","#e3e6eb");
  document.documentElement.style.setProperty("--text","#1f2937");
  document.documentElement.style.setProperty("--muted","rgba(0,0,0,0.10)");
}

applyDark(); /* default */

sw.onclick = ()=>{
  sw.classList.toggle("on");

  if(sw.classList.contains("on")) applyLight();
  else applyDark();
};

/* accent color */
document.querySelectorAll(".color-swatch").forEach(el=>{
  el.onclick=()=>{
    document.querySelectorAll(".color-swatch").forEach(s=>s.classList.remove("selected"));
    el.classList.add("selected");

    const c = el.dataset.color;
    document.documentElement.style.setProperty("--accent",c);
  };
});
</script>

</body>
</html>
