<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
  <style>
    :root{--bg:#121212;--card:#1d1d1d;--accent:#00ffa6;--text:#eee}
    body{margin:0;font-family:sans-serif;direction:rtl;background:var(--bg);color:var(--text)}
    .header{padding:18px;text-align:center;background:#151515;font-size:22px}

    /* Ø¯Ùˆ Ø³ØªÙˆÙ† */
    .cols{display:flex;gap:18px;padding:16px;box-sizing:border-box}
    .col{flex:1;background:transparent}
    .col .category{padding:10px 14px;font-size:18px;background:#212121;border-radius:8px;margin-bottom:10px}

    .station-list{display:flex;flex-direction:column;gap:10px}
    .station{display:flex;align-items:center;justify-content:space-between;background:var(--card);padding:10px;border-radius:10px;cursor:pointer}
    .station:hover{background:#2a2a2a}
    .station .left{display:flex;align-items:center;gap:10px}
    .station img{width:44px;height:44px;border-radius:6px;object-fit:cover}
    .station .meta{display:flex;flex-direction:column;text-align:right}
    .station button{background:var(--accent);border:none;color:#000;padding:8px 10px;border-radius:8px;cursor:pointer}

    /* fixed simple player bottom */
    .player-box{position:fixed;bottom:0;left:0;right:0;background:#181818;border-top:3px solid var(--accent);padding:10px 14px;display:flex;align-items:center;gap:12px;z-index:100}
    .player-title{flex:1;font-size:16px}
    .vol{width:140px}

    /* equalizer canvas */
    #eq{width:100%;height:64px;display:block;background:#000;margin-top:10px}

    /* responsive */
    @media(max-width:800px){
      .cols{flex-direction:column}
    }
  </style>
</head>
<body>

  <div class="header">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <div class="cols">
    <!-- left column: Turk/Azeri -->
    <div class="col" id="col_tr">
      <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
      <div class="station-list" id="cat_tr"></div>
    </div>

    <!-- right column: Persian -->
    <div class="col" id="col_fa">
      <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
      <div class="station-list" id="cat_fa"></div>
    </div>
  </div>

  <!-- fixed simple player (name + single play/pause handled per-station) -->
  <div class="player-box">
    <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>
    <div>
      Ø­Ø¬Ù…: <input class="vol" id="volume" type="range" min="0" max="1" step="0.01" value="1">
    </div>
    <div>
      <button id="stopBtn">â¹ ØªÙˆÙ‚Ù</button>
    </div>
  </div>

  <!-- bottom equalizer -->
  <canvas id="eq"></canvas>

  <script>
    // Ù„ÛŒØ³Øª Ø§ÛŒØ³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§
    const stations = [
  {name:"Radio Hamrah", url:"https://stream.zeno.fm/euutwhsru2wtv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/QXH8sr3xE8WGEbYBpaNlPpoAuEMKqcEoFDAZOS_fixI/rs:fill:256:256/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlHd3NTRGxOMFlYUnBiMjVRY205bWFXeGxHSUNBZ0lEUDd0b0tES0lCQkhwbGJtOC9pbWFnZS8_dT0xNjcyMzAxMjY3MDAw.webp", lang:"fa"},
  {name:"Radio Yar", url:"https://stream.zeno.fm/oyb5oh6ne3tuv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/kw4YYJRvsl-DswchOsWr3Vtz1MnLY8gfkPAf_FSMgyo/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMWRjZmJjMzktYzM4NS00OTg3LWE5ZTQtYTFiMjE0NDAzZDg3L2ltYWdlLz91PTE3MjgzOTk2MzcwMDA.webp", lang:"fa"},
  {name:"KIRN 670", url:"https://stream.zeno.fm/wyth8w2r3heuv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/YJygcpY0wJ-ORl7yrs57txbWABe87n5INuAERhqfRXk/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F0NWZQcWdvTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0F3TW00akFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY2MTI4MjY5MzAwMA.webp", lang:"fa"},
  {name:"Radio Simorgh", url:"https://stream.zeno.fm/9svfnobkrxrvv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/eNYSMBmJNoW6_hcdkosiReSKOx7HHLAn7fP6Tso3DWc/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjAxZGE3MmItNWFhYy00OWU5LWEzN2YtM2IzYjZjZjZmZjQxL2ltYWdlLz91PTE3NjMxNjAxMzcwMDA.webp", lang:"fa"},
  {name:"Radio Yar Plus", url:"https://stream.zeno.fm/2jwyo983y49vv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/7XCVsr_ZE1q3fpPcrCpQD1prYmMrjHoCWo2u7sHhGYU/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvZDYxZWM4ZjMtZTI1NC00ODBmLWE1NzAtNTZhNjYxYjY0ZTllL2ltYWdlLz91PTE3MzgxNTc4NTMwMDA.webp", lang:"fa"},
  {name:"Ø±Ø§Ø¯ÛŒÙˆ Ø¢ÙˆÙ†Ú¯ Ú©Ù„Ø§Ù¾", url:"https://stream.zeno.fm/fpabqr8pd9zuv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/acnY7ntKys9h-2AhQvRWpVDUV0WY3Kh-Jfb8rkjNuH4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNTBmMmVlYjAtNzVkOC00YTllLTlkNWYtZjY1YjkwYjk3MDQ2L2ltYWdlLz91PTE3MzY4NDYwMzEwMDA.webp", lang:"fa"},
  {name:"Radio Farsi London", url:"https://stream.zeno.fm/c3kkavhhzd0uv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/-YxtmG_1FTNyGCT_8g7soWRiEMvzx7HNLWvs57CcbIw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJREFqUHZXa0FnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJRFEybzJKdVFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY3ODA2MTQ1MDAwMA.webp", lang:"fa"},
  {name:"Radio Shadi", url:"https://ice9.securenetsystems.net/SHADI", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/NRIGBcOzqWFUZZ4dhVZ3bp6oKMftJTpniyrmgru7dZM/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvOGUyZDcwMjUtMmZhMC00MDU5LWFmNGMtMDg0ZjA1NmZjOTk4L2ltYWdlLz91PTE3MDE2OTc1OTEwMDA.webp", lang:"fa"},

  {name:"ARABESK EFSANE FM", url:"https://stream.zeno.fm/x5n4sfyy9nhvv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/6PGFwWVgLll3f4INzxVqlwdjpOfStwE2wVTFu6GDrzw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0l6YVR3dndnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0lfYi1XNFFrTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NTE3MjE5NTAwMA.webp", lang:"az"},
  {name:"Ä°ZNÄ°K FM", url:"https://stream.zeno.fm/4crdx4nukrnuv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/cbY5lyYrOd6Dy6Dor1DhLsqTzzfB4I8-0dwyooRgQa4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNzkwYTBjYjctYTMwMC00ODRjLWI2ZjItMTg5YmNjOWFjNmM1L2ltYWdlLz91PTE3NjI2ODg4ODIwMDA.webp", lang:"az"},
  {name:"Radyo Nostaljinin Sesi", url:"https://stream.zeno.fm/q7zxyx2qsfhvv", img:"https://zeno.fm/_ipx/_/https://images.zeno.fm/C40EP-w5lbCEjhD3OEXoLH0mqT4QAjoi3HcMlrdprM0/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F4SkdkdkFzTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0k2b3FmX3drTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NjQ5NTUzMzAwMA.webp", lang:"az"}
];

    // Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
    const cat_fa = document.getElementById('cat_fa');
    const cat_tr = document.getElementById('cat_tr');
    const nowPlaying = document.getElementById('nowPlaying');
    const volume = document.getElementById('volume');
    const stopBtn = document.getElementById('stopBtn');

    // audio single instance
    const audio = new Audio();
    audio.crossOrigin = "anonymous";
    audio.volume = parseFloat(volume.value);

    // Ù¾Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§
    function makeStationElement(st){
      const el = document.createElement('div');
      el.className = 'station';

      const left = document.createElement('div'); left.className='left';
      const meta = document.createElement('div'); meta.className='meta';
      const title = document.createElement('div'); title.textContent = st.name;
      meta.appendChild(title);

      // logo Ø§Ø®ØªÛŒØ§Ø±ÛŒ
      if(st.logo){
        const img = document.createElement('img'); img.src = st.logo; img.alt='logo';
        left.appendChild(img);
      }
      left.appendChild(meta);

      const btn = document.createElement('button');
      btn.textContent = 'â–¶ Ù¾Ø®Ø´';
      btn.onclick = (e)=>{ e.stopPropagation(); handlePlay(st, btn); };

      el.appendChild(left);
      el.appendChild(btn);

      // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„ Ø§ÛŒØªÙ… Ù‡Ù… Ù¾Ø®Ø´ Ú©Ù†Ù‡
      el.onclick = ()=> handlePlay(st, btn);
      return el;
    }

    stations.forEach(s => {
      const node = makeStationElement(s);
      if(s.lang === 'fa') cat_fa.appendChild(node);
      else cat_tr.appendChild(node);
    });

    // Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø®Ø´
    let currentStation = null;
    let currentButton = null;

    function handlePlay(st, btn){
      // Ø§Ú¯Ø± Ù‡Ù…ÙˆÙ† Ø§ÛŒØ³ØªÚ¯Ø§Ù‡ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´Ù‡ -> ØªÙˆÙ‚Ù
      if(currentStation && currentStation.url === st.url && !audio.paused){
        audio.pause();
        btn.textContent = 'â–¶ Ù¾Ø®Ø´';
        nowPlaying.textContent = 'Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡';
        return;
      }

      // Ø§Ú¯Ø± Ø§ÛŒØ³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
      audio.src = st.url;
      audio.play().catch(err=>{
        console.warn('Ù¾Ø®Ø´ Ù†Ø§Ù…ÙˆÙÙ‚:', err);
        alert('Ù…Ø±ÙˆØ±Ú¯Ø± Ø§Ø¬Ø§Ø²Ù‡Ù” Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± ØµØ¯Ø§ Ø±Ø§ Ù†Ø¯Ø§Ø¯ ÛŒØ§ Ù„ÛŒÙ†Ú© Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ ÛŒÚ©Ø¨Ø§Ø± Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ÛŒØ§ Ù„ÛŒÙ†Ú© Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.');
      });

      // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ú©Ù…Ù‡ Ù‚Ø¨Ù„ÛŒ
      if(currentButton) currentButton.textContent = 'â–¶ Ù¾Ø®Ø´';
      btn.textContent = 'â¸ï¸ ØªÙˆÙ‚Ù';
      currentStation = st;
      currentButton = btn;
      nowPlaying.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´: ' + st.name;
    }

    // Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§
    volume.addEventListener('input', ()=>{ audio.volume = parseFloat(volume.value); });
    stopBtn.addEventListener('click', ()=>{ audio.pause(); if(currentButton) currentButton.textContent='â–¶ Ù¾Ø®Ø´'; nowPlaying.textContent='Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡'; });

    // EQUALIZER (canvas)
    const eq = document.getElementById('eq');
    const eqCtx = eq.getContext('2d');

    // ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡
    function resizeEq(){ eq.width = window.innerWidth; eq.height = 64; }
    window.addEventListener('resize', resizeEq); resizeEq();

    // WebAudio analyser
    let audioCtx = null, analyser = null, srcNode = null;
    function ensureAudioContext(){
      if(audioCtx) return;
      audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      srcNode = audioCtx.createMediaElementSource(audio);
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 256;
      srcNode.connect(analyser);
      analyser.connect(audioCtx.destination);
    }

    function draw(){
      requestAnimationFrame(draw);
      if(!analyser) { eqCtx.fillStyle='#000'; eqCtx.fillRect(0,0,eq.width,eq.height); return; }
      const bufferLength = analyser.frequencyBinCount;
      const dataArray = new Uint8Array(bufferLength);
      analyser.getByteFrequencyData(dataArray);

      eqCtx.fillStyle = '#000';
      eqCtx.fillRect(0,0,eq.width,eq.height);
      const barWidth = (eq.width / bufferLength) * 2.5;
      let x = 0;
      for(let i=0;i<bufferLength;i++){
        const v = dataArray[i]/2;
        eqCtx.fillStyle = '#00ffa6';
        eqCtx.fillRect(x, eq.height - v, barWidth, v);
        x += barWidth + 1;
      }
    }
    draw();

    // Ù‡Ù†Ú¯Ø§Ù… Ø§ÙˆÙ„ÛŒÙ† Ù¾Ø®Ø´ AudioContext Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†
    audio.addEventListener('play', ()=>{ try{ ensureAudioContext(); }catch(e){console.warn(e);} });

  </script>

</body>
</html>
