<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>Online Radio Player</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      direction: rtl;
      background: #121212;
      color: #eee;
    }
    .header {
      padding: 20px;
      font-size: 26px;
      text-align: center;
      background: #1f1f1f;
    }
    .category {
      padding: 14px 20px;
      font-size: 20px;
      background: #222;
      margin-top: 20px;
      border-right: 5px solid #00ffa6;
    }

    .station-list {
      padding: 10px 20px;
    }

    .station {
      display: flex;
      align-items: center;
      background: #1d1d1d;
      margin: 8px 0;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .station:hover {
      background: #333;
    }

    .station img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      margin-left: 12px;
      object-fit: cover;
    }

    /* PLAYER */
    .player-box {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #181818;
      border-top: 2px solid #00ffa6;
      padding: 14px;
    }
    .player-title {
      font-size: 18px;
      margin-bottom: 6px;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    button {
      background: #00ffa6;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .visualizer {
      width: 100%;
      height: 50px;
      background: #000;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div class="header">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <!-- CATEGORY: Persian -->
  <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
  <div class="station-list" id="cat_fa"></div>

  <!-- CATEGORY: Turk / Azeri -->
  <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
  <div class="station-list" id="cat_tr"></div>

  <!-- PLAYER -->
  <div class="player-box">
    <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>

    <audio id="player" controls style="width:100%; margin-top:10px;"></audio>

    <div style="margin-top:10px;">
      Ø­Ø¬Ù… ØµØ¯Ø§: <input type="range" min="0" max="1" step="0.01" value="1" onchange="player.volume=this.value">
    </div>
  </div>

  <!-- Bottom Equalizer -->
  <canvas id="eq" style="width:100%; height:60px; background:#000; margin-top:20px;"></canvas>

  <script>
    const stations = [
      // ======== Persian ========
      { name: "Radio Sedaye Khiaban", url: "https://stream-177.zeno.fm/1nyiz8ma60hvv", lang: "fa" },
      { name: "Radio Shadi", url: "https://ice9.securenetsystems.net/SHADI", lang: "fa" },
      { name: "Radio Avang Klap", url: "https://stream.zeno.fm/fpabqr8pd9zuv", lang: "fa" },
      { name: "Radio Bamdad", url: "https://stream.zeno.fm/16gxgv7ch5zuv", lang: "fa" },
      { name: "Radio Simorgh", url: "https://stream.zeno.fm/9svfnobkrxrvv", lang: "fa" },
      { name: "Radio Hamrah", url: "https://stream.zeno.fm/euutwhsru2wtv", lang: "fa" },
      { name: "Radio Yar", url: "https://stream.zeno.fm/oyb5oh6ne3tuv", lang: "fa" },
      { name: "Radio Yar Plus", url: "https://stream.zeno.fm/2jwyo983y49vv", lang: "fa" },
      { name: "KIRN 670 AM", url: "https://stream.zeno.fm/wyth8w2r3heuv", lang: "fa" },
      { name: "Radio Farsi London", url: "https://stream.zeno.fm/c3kkavhhzd0uv", lang: "fa" },

      // ======== Turk / Azeri ========
      { name: "Arabesk Efsane FM", url: "https://stream.zeno.fm/x5n4sfyy9nhvv", lang: "tr" },
      { name: "Radyo Nostalji", url: "https://stream.zeno.fm/q7zxyx2qsfhvv", lang: "tr" },
      { name: "Radio Veten", url: "https://stream.zeno.fm/0kgkkzanmueuv", lang: "tr" },
      { name: "Ä°znik FM", url: "https://stream.zeno.fm/4crdx4nukrnuv", lang: "tr" },
      { name: "NaxÃ§Ä±van Radiosu", url: "http://s33.myradiostream.com:12782/listen.mp3", lang: "tr" }
    ];

    const cat_fa = document.getElementById("cat_fa");
    const cat_tr = document.getElementById("cat_tr");
    const player = document.getElementById("player");
    const nowPlaying = document.getElementById("nowPlaying");

    stations.forEach(st => {
      const div = document.createElement("div");
      div.className = "station";
      div.textContent = st.name;
      div.onclick = () => playStation(st);

      if (st.lang === "fa") cat_fa.appendChild(div);
      else cat_tr.appendChild(div);
    });

    function playStation(st) {
      player.src = st.url;
      player.play();
      nowPlaying.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´: " + st.name;
    }

    // Equalizer
    const eq = document.getElementById("eq");
    const eqCtx = eq.getContext("2d");
    eq.width = window.innerWidth;

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const srcNode = audioCtx.createMediaElementSource(player);
    const analyser = audioCtx.createAnalyser();
    analyser.fftSize = 256;
    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    srcNode.connect(analyser);
    analyser.connect(audioCtx.destination);

    function drawEq() {
      requestAnimationFrame(drawEq);
      analyser.getByteFrequencyData(dataArray);

      eqCtx.fillStyle = "#000";
      eqCtx.fillRect(0, 0, eq.width, eq.height);

      const barWidth = (eq.width / bufferLength) * 2.5;
      let x = 0;
      for (let i = 0; i < bufferLength; i++) {
        const barHeight = dataArray[i] / 2;
        eqCtx.fillStyle = "#00ffa6";
        eqCtx.fillRect(x, eq.height - barHeight, barWidth, barHeight);
        x += barWidth + 1;
      }
    }
    drawEq();

  </script>

</body>
</html>
