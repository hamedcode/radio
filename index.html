<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>

<style>
:root{
  --bg:#121212;
  --card:#1d1d1d;
  --accent:#00ffa6;
  --text:#eee;
  --header:#151515;
  --muted:rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto;
  direction:rtl;
  background:var(--bg);
  color:var(--text);
}

/* ===== TOP BAR ===== */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:var(--header);
  border-bottom:1px solid var(--muted);
  position:sticky;
  top:0;
  z-index:1500;
}
.title{font-size:20px}

/* iOS switch */
.switch {
  width:56px; height:26px;
  border-radius:50px;
  background:#555;
  position:relative;
  cursor:pointer;
  transition:.25s;
  display:flex;
  align-items:center;
  padding:0 6px;
}

.switch-icon {
  font-size:14px;
  color:white;
  pointer-events:none;
  transition:.25s;
  position:absolute;
  left:8px;
}

.switch.on .switch-icon {
  left:auto;
  right:8px;
}
.switch.on{background:var(--accent)}
.switch.on .switch-circle{left:24px}

/* Color picker */
.color-picker{display:flex;gap:8px}
.color-swatch{
  width:22px;height:22px;
  border-radius:50%;
  cursor:pointer;
  border:2px solid rgba(255,255,255,0.1);
}
.color-swatch.selected{
  outline:2px solid #fff;
  transform:scale(1.1);
}

/* ===== CHANNEL LIST ===== */
.cols{
  display:flex;
  gap:18px;
  padding:16px;
  max-width:1100px;
  margin:12px auto 170px auto;
}
.col{flex:1}

.category{
  background:var(--card);
  padding:10px 14px;
  border-radius:8px;
  margin-bottom:12px;
  font-size:18px;
}

.station-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.station{
  background:var(--card);
  border-radius:10px;
  padding:10px;
  display:flex;
  justify-content:space-between;
  cursor:pointer;
}
.station:hover{background:rgba(255,255,255,0.05)}
.left{display:flex;align-items:center;gap:12px}
.station img{
  width:44px;height:44px;
  border-radius:6px;
  object-fit:cover;
}
.name{font-weight:600}

.station button{
  background:var(--accent);
  border:none;
  padding:8px 10px;
  border-radius:8px;
  min-width:60px;
  text-align:center;
  cursor:pointer;
  color:#000;
}

/* ===== PLAYER ===== */
.player-box{
  position:fixed;
  bottom:0;left:0;right:0;
  padding:12px;
  background:var(--card);
  border-top:3px solid var(--accent);
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:2000;
  box-shadow:0 -6px 25px rgba(0,0,0,0.6);
}

#eq{
  width:100%;height:60px;
  background:#000;border-radius:6px;
}

.player-controls{
  display:flex;
  gap:12px;
  align-items:center;
}
.player-title{
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

@media(max-width:900px){
  .cols{flex-direction:column;margin-bottom:230px}
  #eq{height:45px}
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="title">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <div style="display:flex;align-items:center;gap:14px">
    <div id="themeSwitch" class="switch">
  <div class="switch-icon">ğŸŒ™</div>
  <div class="switch-circle"></div>
</div>

    <div class="color-picker" id="colorPicker">
      <div class="color-swatch selected" data-color="#00ffa6" style="background:#00ffa6"></div>
      <div class="color-swatch" data-color="#00aaff" style="background:#00aaff"></div>
      <div class="color-swatch" data-color="#ffcc00" style="background:#ffcc00"></div>
      <div class="color-swatch" data-color="#ff4444" style="background:#ff4444"></div>
      <div class="color-swatch" data-color="#c95bff" style="background:#c95bff"></div>
    </div>
  </div>
</div>

<!-- CHANNEL LIST -->
<div class="cols">
  <div class="col">
    <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
    <div class="station-list" id="cat_tr"></div>
  </div>

  <div class="col">
    <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
    <div class="station-list" id="cat_fa"></div>
  </div>
</div>

<!-- PLAYER -->
<div class="player-box">
  <canvas id="eq"></canvas>

  <div class="player-controls">
    <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>

    Ø­Ø¬Ù…:
    <input id="volume" type="range" min="0" max="1" value="1" step="0.01">

    <button id="stopBtn">â¹ ØªÙˆÙ‚Ù</button>
  </div>
</div>

<script>
/* ====================== */
/*      CHANNEL DATA      */
/* ====================== */
const channelsTR = [
  { name:"Arabesk Efsane FM",
    url:"https://stream.zeno.fm/x5n4sfyy9nhvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/6PGFwWVgLll3f4INzxVqlwdjpOfStwE2wVTFu6GDrzw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0l6YVR3dndnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0lfYi1XNFFrTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NTE3MjE5NTAwMA.webp"
  },

  { name:"Ä°ZNÄ°K FM",
    url:"https://stream.zeno.fm/4crdx4nukrnuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/cbY5lyYrOd6Dy6Dor1DhLsqTzzfB4I8-0dwyooRgQa4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNzkwYTBjYjctYTMwMC00ODRjLWI2ZjItMTg5YmNjOWFjNmM1L2ltYWdlLz91PTE3NjI2ODg4ODIwMDA.webp"
  },

  { name:"Radyo Nostaljinin Sesi",
    url:"https://stream.zeno.fm/q7zxyx2qsfhvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/C40EP-w5lbCEjhD3OEXoLH0mqT4QAjoi3HcMlrdprM0/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F4SkdkdkFzTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0k2b3FmX3drTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NjQ5NTUzMzAwMA.webp"
  },

  { name:"Arabeskin MerkazÄ°",
    url:"https://canli.arabeskinmerkezi.com/9180/stream",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/UBQlE7LkPyb1LyisrVkS28F-iyqkolXqUCF0GSBe7q4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYTgyNzg4YjctYjk1ZS00ODBhLTgyZGUtODg2YzUyMmYyYzNmL2ltYWdlLz91PTE3MDE2OTY2NDAwMDA.webp"
  },

  { name:"Azad AzÉ™rbaycan radiosu",
    url:"https://radio.fnvm.workers.dev/?url=https%3A%2F%2Faudiostr.atv.az%2F106.3fm",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/UBQlE7LkPyb1LyisrVkS28F-iyqkolXqUCF0GSBe7q4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYTgyNzg4YjctYjk1ZS00ODBhLTgyZGUtODg2YzUyMmYyYzNmL2ltYWdlLz91PTE3MDE2OTY2NDAwMDA.webp"
  },
  
  { name:"Yurd FM",
    url:"https://radio.fnvm.workers.dev/?url=https%3A%2F%2Ficecast.livetv.az%2Fyurdfm",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/UBQlE7LkPyb1LyisrVkS28F-iyqkolXqUCF0GSBe7q4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYTgyNzg4YjctYjk1ZS00ODBhLTgyZGUtODg2YzUyMmYyYzNmL2ltYWdlLz91PTE3MDE2OTY2NDAwMDA.webp"
  },

  { name:"ARAS RADIO",
    url:"https://stream.zeno.fm/dkq2vwpuqf0uv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/tYMUUWuJS9KQEGfSRhxgFlnUmU7jhxT13xYZNss_4BA/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMDgxNzM0ZDUtODc4MS00M2YzLWEzZmItNWFkYzkwOTU4ODliL2ltYWdlLz91PTE3MTM3ODE1MjAwMDA.webp"
  },

  { name:"Arabesk ON7",
    url:"https://stream.zeno.fm/kd3h0p1qcphvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/-rmsjJF9vcR8B5-oVkTNyxuqfkaMi7ei-5ZdOqfEvck/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0luY185NkFnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0lrX3FRbHdvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTcyOTg2NTgzNzAwMA.webp"
  },

  { name:"Karaviran FM",
    url:"https://stream.zeno.fm/wfd8v2rsywzuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/cCmkCoaK6IOTfoWv1o41bgG-48gthcV75QdeIZoITI0/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ1E5TGpudFFrTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ1F0TmFjX0FzTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY2NzE2MjQ5MTAwMA.webp"
  },
  
  { name:"NaxÃ§Ä±van Radiosu",
    url:"http://s33.myradiostream.com:12782/listen.mp3",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/qpsO_iNA8aGqsKrXHX0fUneE_f0gUl1kqYwilPn2HD4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjlmNzI0NTEtOWM2Ny00YzgxLWE0MTMtMWFlODJjYTM2ZWY4L2ltYWdlLz91PTE3MDE2OTY4MDYwMDA.webp"
  }
];



const channelsFA = [
  { name:"Radio Hamrah",
    url:"https://stream.zeno.fm/euutwhsru2wtv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/QXH8sr3xE8WGEbYBpaNlPpoAuEMKqcEoFDAZOS_fixI/rs:fill:256:256/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlHd3NTRGxOMFlYUnBiMjVRY205bWFXeGxHSUNBZ0lEUDd0b0tES0lCQkhwbGJtOC9pbWFnZS8_dT0xNjcyMzAxMjY3MDAw.webp"
  },

  { name:"Radio Yar",
    url:"https://stream.zeno.fm/oyb5oh6ne3tuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/kw4YYJRvsl-DswchOsWr3Vtz1MnLY8gfkPAf_FSMgyo/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMWRjZmJjMzktYzM4NS00OTg3LWE5ZTQtYTFiMjE0NDAzZDg3L2ltYWdlLz91PTE3MjgzOTk2MzcwMDA.webp"
  },

  { name:"KIRN 670",
    url:"https://stream.zeno.fm/16gxgv7ch5zuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/YJygcpY0wJ-ORl7yrs57txbWABe87n5INuAERhqfRXk/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F0NWZQcWdvTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0F3TW00akFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY2MTI4MjY5MzAwMA.webp"
  },

  { name:"RADIO SIMORGH",
    url:"https://stream.zeno.fm/9svfnobkrxrvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/eNYSMBmJNoW6_hcdkosiReSKOx7HHLAn7fP6Tso3DWc/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjAxZGE3MmItNWFhYy00OWU5LWEzN2YtM2IzYjZjZjZmZjQxL2ltYWdlLz91PTE3NjMxNjAxMzcwMDA.webp"
  },

  { name:"Radio Yar Plus",
    url:"https://stream.zeno.fm/2jwyo983y49vv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/7XCVsr_ZE1q3fpPcrCpQD1prYmMrjHoCWo2u7sHhGYU/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvZDYxZWM4ZjMtZTI1NC00ODBmLWE1NzAtNTZhNjYxYjY0ZTllL2ltYWdlLz91PTE3MzgxNTc4NTMwMDA.webp"
  },

  { name:"Radio Avang Club",
    url:"https://stream.zeno.fm/fpabqr8pd9zuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/acnY7ntKys9h-2AhQvRWpVDUV0WY3Kh-Jfb8rkjNuH4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNTBmMmVlYjAtNzVkOC00YTllLTlkNWYtZjY1YjkwYjk3MDQ2L2ltYWdlLz91PTE3MzY4NDYwMzEwMDA.webp"
  },

  { name:"Radio Farsi London",
    url:"https://stream.zeno.fm/c3kkavhhzd0uv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/-YxtmG_1FTNyGCT_8g7soWRiEMvzx7HNLWvs57CcbIw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJREFqUHZXa0FnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJRFEybzJKdVFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY3ODA2MTQ1MDAwMA.webp"
  },

  { name:"Radio Darbast",
    url:"https://live.radiodarbast.com/stream.mp3",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_darbast.webp"
  },

  { name:"Radio Arina",
    url:"https://s5.voscast.com:10205/stream",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_arina.jpg"
  },

  { name:"Radio Khatereh",
    url:"https://s-us1.srv-control.com:5727/stream?tag=rk6qr",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_khatereh.png"
  },

  { name:"Radio Sarcheshmeh",
    url:"https://sarcheshmeh.awsvps.com/stream",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_sarcheshmeh.png"
  },

  { name:"Radio JiBi",
    url:"https://stream.radiojar.com/pk8rnhvtuy8uv",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_ji_bi.png"
  },

  { name:"Radio Salmak",
    url:"https://stream.radiojar.com/atdbyqwr8vuvv",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_salmak.png"
  },

    { name:"Radio AVA Istanbul",
    url:"https://play.markaradyo.com:8002/stream",
    logo:"https://www.sedaye-iran.online/assets/images/emblems/radio_ava_istanbul.webp"
  },
  
  { name:"Radio Shadi",
    url:"https://ice9.securenetsystems.net/SHADI",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/NRIGBcOzqWFUZZ4dhVZ3bp6oKMftJTpniyrmgru7dZM/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvOGUyZDcwMjUtMmZhMC00MDU5LWFmNGMtMDg0ZjA1NmZjOTk4L2ltYWdlLz91PTE3MDE2OTc1OTEwMDA.webp"
  }
];


function createList(list, target){
  target.innerHTML = "";
  list.forEach(ch=>{
    const id = "btn_" + ch.name.replace(/\s+/g,"_");

    const el = document.createElement("div");
    el.className="station";

    el.innerHTML = `
      <div class="left">
        <img src="${ch.logo}" referrerpolicy="no-referrer">
        <div class="name">${ch.name}</div>
      </div>
      <button id="${id}">â–¶ Ù¾Ø®Ø´</button>
    `;

    el.querySelector("button").onclick = ()=> toggleChannel(ch);
    target.appendChild(el);
  });
}


createList(channelsTR, document.getElementById("cat_tr"));
createList(channelsFA, document.getElementById("cat_fa"));

/* ==================================== */
/*          AUDIO + EQ ENGINE           */
/* ==================================== */

let audio = new Audio();
audio.crossOrigin = "anonymous";

let audioCtx = null;
let analyser = null;
let sourceNode = null;
let dataArray = null;

let userGesture = false;

function ensureAudioContext(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 64;

    dataArray = new Uint8Array(analyser.frequencyBinCount);

    sourceNode = audioCtx.createMediaElementSource(audio);
    sourceNode.connect(analyser);
    analyser.connect(audioCtx.destination);
  }
}

/* Fix Chrome autoplay restriction */
document.addEventListener("click", ()=>{
  userGesture = true;
  ensureAudioContext();
  if(audioCtx && audioCtx.state === "suspended"){
    audioCtx.resume();
  }
}, {once:true});

/* ==================================== */
/*        PLAYER CONTROL LOGIC          */
/* ==================================== */

let currentChannel = null;

/* Sync button states */
function updateButtons(){
  document.querySelectorAll(".station button").forEach(btn=>{
    const txt = btn.innerText;
    btn.innerText = "â–¶ Ù¾Ø®Ø´";
  });

  if(currentChannel){
    const id = "btn_" + currentChannel.name.replace(/\s+/g,"_");
    const btn = document.getElementById(id);
    if(btn) btn.innerText = "â¹ ØªÙˆÙ‚Ù";
  }
}

/* Main toggle */
function toggleChannel(ch){
  if(!userGesture){
    ensureAudioContext();
  }

  if(currentChannel && currentChannel.url === ch.url && !audio.paused){
    audio.pause();
    audio.src = "";
    currentChannel = null;
    document.getElementById("nowPlaying").innerText = "Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡";
    updateButtons();
    return;
  }

  currentChannel = ch;
  audio.src = ch.url;

  ensureAudioContext();
  if(audioCtx.state === "suspended") audioCtx.resume();

  audio.play().catch(e=>console.log("play error:",e));

  document.getElementById("nowPlaying").innerText = ch.name;
  updateButtons();
}

/* Stop button */
document.getElementById("stopBtn").onclick = ()=>{
  audio.pause();
  audio.src = "";
  currentChannel = null;
  document.getElementById("nowPlaying").innerText = "Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡";
  updateButtons();
};

/* Volume */
document.getElementById("volume").oninput = e=>{
  audio.volume = e.target.value;
};

/* ==================================== */
/*            EQUALIZER DRAW            */
/* ==================================== */

const canvas = document.getElementById("eq");
const ctx = canvas.getContext("2d");

function resizeEQ(){
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
resizeEQ();
window.addEventListener("resize", resizeEQ);

function drawEQ(){
  requestAnimationFrame(drawEQ);
  if(!analyser) return;

  analyser.getByteFrequencyData(dataArray);

  ctx.fillStyle = "#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  const barWidth = canvas.width / dataArray.length;
  for(let i=0;i<dataArray.length;i++){
    const v = dataArray[i];
    const barHeight = (v / 255) * canvas.height;

    ctx.fillStyle = getComputedStyle(document.documentElement)
      .getPropertyValue("--accent");
    ctx.fillRect(i*barWidth, canvas.height-barHeight, barWidth-1, barHeight);
  }
}
drawEQ();

/* ==================================== */
/*          THEME + COLOR PICKER        */
/* ==================================== */

const switchEl = document.getElementById("themeSwitch");

function setDarkMode(on){
  switchEl.classList.toggle("on", on);
  document.querySelector(".switch-icon").textContent = on ? "ğŸŒ™" : "â˜€ï¸";
  if(on){
    document.documentElement.style.setProperty("--bg", "#121212");
    document.documentElement.style.setProperty("--card", "#1d1d1d");
    document.documentElement.style.setProperty("--header", "#151515");
    document.documentElement.style.setProperty("--text", "#eee");
    document.documentElement.style.setProperty("--muted","rgba(255,255,255,0.06)");
  } else {
    document.documentElement.style.setProperty("--bg", "#e3f4ff");
    document.documentElement.style.setProperty("--card", "#f0f9ff");
    document.documentElement.style.setProperty("--header", "#ffffff");
    document.documentElement.style.setProperty("--text", "#000");
    document.documentElement.style.setProperty("--muted","rgba(0,0,0,0.08)");
  }
}

switchEl.onclick = ()=>{
  const isOn = !switchEl.classList.contains("on");
  setDarkMode(isOn);
};

/* Default = Dark */
setDarkMode(true);

/* Accent color */
document.querySelectorAll(".color-swatch").forEach(sw=>{
  sw.onclick = ()=>{
    document.querySelectorAll(".color-swatch").forEach(s=>s.classList.remove("selected"));
    sw.classList.add("selected");

    const col = sw.dataset.color;
    document.documentElement.style.setProperty("--accent", col);
  };
});
</script>
</body>
</html>
