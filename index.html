<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>

<style>
:root{
  --bg:#121212;
  --card:#1d1d1d;
  --accent:#00ffa6;
  --text:#eee;
  --header:#151515;
  --muted:rgba(255,255,255,0.06);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto;
  direction:rtl;
  background:var(--bg);
  color:var(--text);
}

/* ===== TOP BAR ===== */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 16px;
  background:var(--header);
  border-bottom:1px solid var(--muted);
  position:sticky;
  top:0;
  z-index:1500;
}
.title{font-size:20px}

/* iOS switch */
.switch{
  width:46px;height:24px;
  border-radius:50px;
  background:#555;
  position:relative;
  cursor:pointer;
  transition:.25s;
}
.switch-circle{
  width:20px;height:20px;
  background:white;
  border-radius:50%;
  position:absolute;
  top:2px;left:2px;
  transition:.25s;
}
.switch.on{background:var(--accent)}
.switch.on .switch-circle{left:24px}

/* Color picker */
.color-picker{display:flex;gap:8px}
.color-swatch{
  width:22px;height:22px;
  border-radius:50%;
  cursor:pointer;
  border:2px solid rgba(255,255,255,0.1);
}
.color-swatch.selected{
  outline:2px solid #fff;
  transform:scale(1.1);
}

/* ===== CHANNEL LIST ===== */
.cols{
  display:flex;
  gap:18px;
  padding:16px;
  max-width:1100px;
  margin:12px auto 170px auto;
}
.col{flex:1}

.category{
  background:var(--card);
  padding:10px 14px;
  border-radius:8px;
  margin-bottom:12px;
  font-size:18px;
}

.station-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.station{
  background:var(--card);
  border-radius:10px;
  padding:10px;
  display:flex;
  justify-content:space-between;
  cursor:pointer;
}
.station:hover{background:rgba(255,255,255,0.05)}
.left{display:flex;align-items:center;gap:12px}
.station img{
  width:44px;height:44px;
  border-radius:6px;
  object-fit:cover;
}
.name{font-weight:600}

.station button{
  background:var(--accent);
  border:none;
  padding:8px 10px;
  border-radius:8px;
  cursor:pointer;
  color:#000;
}

/* ===== PLAYER ===== */
.player-box{
  position:fixed;
  bottom:0;left:0;right:0;
  padding:12px;
  background:var(--card);
  border-top:3px solid var(--accent);
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:2000;
  box-shadow:0 -6px 25px rgba(0,0,0,0.6);
}

#eq{
  width:100%;height:60px;
  background:#000;border-radius:6px;
}

.player-controls{
  display:flex;
  gap:12px;
  align-items:center;
}
.player-title{
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

@media(max-width:900px){
  .cols{flex-direction:column;margin-bottom:230px}
  #eq{height:45px}
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="title">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <div style="display:flex;align-items:center;gap:14px">
    <div id="themeSwitch" class="switch">
      <div class="switch-circle"></div>
    </div>

    <div class="color-picker" id="colorPicker">
      <div class="color-swatch selected" data-color="#00ffa6" style="background:#00ffa6"></div>
      <div class="color-swatch" data-color="#00aaff" style="background:#00aaff"></div>
      <div class="color-swatch" data-color="#ffcc00" style="background:#ffcc00"></div>
      <div class="color-swatch" data-color="#ff4444" style="background:#ff4444"></div>
      <div class="color-swatch" data-color="#c95bff" style="background:#c95bff"></div>
    </div>
  </div>
</div>

<!-- CHANNEL LIST -->
<div class="cols">
  <div class="col">
    <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
    <div class="station-list" id="cat_tr"></div>
  </div>

  <div class="col">
    <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
    <div class="station-list" id="cat_fa"></div>
  </div>
</div>

<!-- PLAYER -->
<div class="player-box">
  <canvas id="eq"></canvas>

  <div class="player-controls">
    <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>

    Ø­Ø¬Ù…:
    <input id="volume" type="range" min="0" max="1" value="1" step="0.01">

    <button id="stopBtn">â¹ ØªÙˆÙ‚Ù</button>
  </div>
</div>

<script>
/* ====================== */
/*      CHANNEL DATA      */
/* ====================== */
const channelsTR = [
  { name:"Arabesk Efsane FM", url:"https://stream.zeno.fm/x5n4sfyy9nhvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/6PGFwWVgLll3f4INZ2xu1fYi1XNFFrTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NTE3MjE5NTAwMA.webp" },

  { name:"Radyo Nostalji", url:"https://stream.zeno.fm/q7zxyx2qsfhvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/C40EP-w5lbCEjhDkdQjfsk2b3FmX3drTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NjQ5NTUzMzAwMA.webp" },

  { name:"Radio Veten", url:"https://stream.zeno.fm/0kgkkzanmueuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/8g8PctmUYsg62k8pVzqm9FiRTk1SUR5aUFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY3NDE5MDEyNzAwMA.webp" },

  { name:"Ä°znik FM", url:"https://stream.zeno.fm/4crdx4nukrnuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/cbY5lyYrJ6Z3GHGFVC1plb2b2ZiY2JjLWI2ZjItMTg5YmNjOWFjNmM1L2ltYWdlLz91PTE3NjI2ODg4ODIwMDA.webp" },

  { name:"NaxÃ§Ä±van Radiosu", url:"http://s33.myradiostream.com:12782/listen.mp3",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/qpsO_iNAc8N1wmD8-8An-d4FTRlSUR5aUFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTcwMTY5NjgwNjAwMA.webp" }
];


const channelsFA = [
  { name:"Radio Shadi", url:"https://ice9.securenetsystems.net/SHADI",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/NRIGBcOzqWFUZZ4du0yzO0IzLWQwNGEtYWFmNGMtMDg0ZjA1NmZjOTk4L2ltYWdlLz91PTE3MDE2OTc1OTEwMDA.webp" },

  { name:"Radio Avang Klap", url:"https://stream.zeno.fm/fpabqr8pd9zuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/acnY7ntKys9h-2AhNWcB06bn_oYrs:fill:288:288/g:ce:0:0/aHR0cHM6Ly93d3cuYXZhbmcuYml6L2NvbnRlbnQvc3RhdGlvbnMvNGI1N2IxYmMtZTc4Ni00NzU5LTlkNWYtZjY1YjkwYjk3MDQ2L2ltYWdlLz91PTE3MzY4NDYwMzEwMDA.webp" },

  { name:"Radio Bamdad", url:"https://stream.zeno.fm/16gxgv7ch5zuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/RI7ZbLc36B1wt2hm2qgjR4pn_jErs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9yYWRpb2JhbWRhZC5jb20vaW1hZ2VzL2JhY2tncm91bmQuanBnP3U9MTY2MDgzMzA4MjAwMA.webp" },

  { name:"Radio Simorgh", url:"https://stream.zeno.fm/9svfnobkrxrvv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/eNYSMBmJNoW6_hcdTJ0EwAHS_v8rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly93d3cuc2ltb3JnaC5mYS9hc3NldHMvaWNvbnMvbG9nby5wbmc_dT0xNzYzMTYwMTM3MDAw.webp" },

  { name:"Radio Hamrah", url:"https://stream.zeno.fm/euutwhsru2wtv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/QXH8sr3xE8WGEbYBI5USud0EUD7doKDlBBHplbm9uLmZtL2ltYWdlLz91PTE2NzIzMDEyNjcwMDA.webp" },

  { name:"Radio Yar", url:"https://stream.zeno.fm/oyb5oh6ne3tuv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/kw4YYJRvsl-DswchXHFK_uUbsswrs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9yYWRpb3lhci5jb20vbG9nby5wbmc_dT0xNzI4Mzk5NjM3MDAw.webp" },

  { name:"Radio Yar Plus", url:"https://stream.zeno.fm/2jwyo983y49vv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/7XCVsr_ZE1q3fpPclTkBMP_AdwArs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9yYWRpb3lhci5jb20vbG9nby1wbHVzLnBuZz91PTE3MzgxNTc4NTMwMDA.webp" },

  { name:"Radio Farsi London", url:"https://stream.zeno.fm/c3kkavhhzd0uv",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/-YxtmG_1FTNyGCT_LCYPzM-9JSQrs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9yYWRpb2Zhc3Jsb25kb24uY29tL2xvZ28ucG5nP3U9MTY3ODA2MTQ1MDAwMA.webp" }
];


function createList(list, target){
  target.innerHTML = "";
  list.forEach(ch=>{
    const el = document.createElement("div");
    el.className="station";

    el.innerHTML = `
      <div class="left">
        <img src="${ch.logo}" referrerpolicy="no-referrer">
        <div class="name">${ch.name}</div>
      </div>
      <button>Ù¾Ø®Ø´</button>
    `;
    el.querySelector("button").onclick = ()=>playChannel(ch);
    target.appendChild(el);
  });
}

createList(channelsTR, document.getElementById("cat_tr"));
createList(channelsFA, document.getElementById("cat_fa"));

/* ====================== */
/*        PLAYER          */
/* ====================== */
let audio = new Audio();
audio.crossOrigin = "anonymous";

let ctx = new AudioContext();
let src = ctx.createMediaElementSource(audio);
let analyser = ctx.createAnalyser();
analyser.fftSize = 256;
analyser.smoothingTimeConstant = 0.55;
src.connect(analyser);
analyser.connect(ctx.destination);

const eq = document.getElementById("eq");
const eqCtx = eq.getContext("2d");

function playChannel(ch){
  audio.src = ch.url;
  audio.play();

  document.getElementById("nowPlaying").textContent = ch.name;
}

document.getElementById("stopBtn").onclick = ()=>audio.pause();
document.getElementById("volume").oninput = e => audio.volume = e.target.value;

/* EQ Draw */
function draw(){
  requestAnimationFrame(draw);

  const buffer = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(buffer);

  const W = eq.width = eq.clientWidth;
  const H = eq.height = eq.clientHeight;

  eqCtx.fillStyle = "#000";
  eqCtx.fillRect(0,0,W,H);

  const usable = Math.floor(buffer.length * 0.80);
  const barW = (W / usable) * 1.8;
  let x = 0;

  const accent = getComputedStyle(document.documentElement).getPropertyValue("--accent").trim();

  for(let i=0;i<usable;i++){
    const val = buffer[i]/255;
    const h = val*H;

    eqCtx.fillStyle = accent;
    eqCtx.fillRect(x, H-h, barW, h);

    x += barW+1;
  }
}
draw();

/* ====================== */
/*   THEME + ACCENT       */
/* ====================== */
const sw = document.getElementById("themeSwitch");

function applyDark(){
  document.documentElement.style.setProperty("--bg","#121212");
  document.documentElement.style.setProperty("--card","#1d1d1d");
  document.documentElement.style.setProperty("--header","#151515");
  document.documentElement.style.setProperty("--text","#eee");
  document.documentElement.style.setProperty("--muted","rgba(255,255,255,0.06)");
}
function applyLight(){
  document.documentElement.style.setProperty("--bg","#e5e7eb");
  document.documentElement.style.setProperty("--card","#e9ecf0");
  document.documentElement.style.setProperty("--header","#e3e6eb");
  document.documentElement.style.setProperty("--text","#1f2937");
  document.documentElement.style.setProperty("--muted","rgba(0,0,0,0.10)");
}

applyDark(); /* default */

sw.onclick = ()=>{
  sw.classList.toggle("on");

  if(sw.classList.contains("on")) applyLight();
  else applyDark();
};

/* accent color */
document.querySelectorAll(".color-swatch").forEach(el=>{
  el.onclick=()=>{
    document.querySelectorAll(".color-swatch").forEach(s=>s.classList.remove("selected"));
    el.classList.add("selected");

    const c = el.dataset.color;
    document.documentElement.style.setProperty("--accent",c);
  };
});
</script>

</body>
</html>
