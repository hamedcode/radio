<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
  <style>
    :root{
      --bg:#121212;
      --card:#1d1d1d;
      --accent:#00ffa6;
      --text:#eee;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      direction:rtl;
      background:var(--bg);
      color:var(--text);
    }

    .header{
      padding:18px;
      text-align:center;
      background:#151515;
      font-size:22px;
      border-bottom:1px solid rgba(255,255,255,0.03);
    }

    .cols{
      display:flex;
      gap:18px;
      padding:16px;
      max-width:1100px;
      margin: 12px auto 170px auto;
    }
    .col{flex:1;}
    .category{
      padding:10px 14px;
      font-size:18px;
      background:#212121;
      border-radius:8px;
      margin-bottom:10px;
    }

    .station-list{display:flex;flex-direction:column;gap:10px}
    .station{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:var(--card);
      padding:10px;
      border-radius:10px;
      cursor:pointer;
      transition: background .15s;
    }
    .station:hover{background:#2a2a2a}
    .station .left{display:flex;align-items:center;gap:12px}
    .station img{width:44px;height:44px;border-radius:6px;object-fit:cover}
    .station .meta{display:flex;flex-direction:column;text-align:right}
    .station .name{font-weight:600}
    .station button{
      background:var(--accent);
      border:none;
      color:#000;
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
    }

    /* Ù¾Ù„ÛŒØ± + Ø§Ú©ÙˆÙ„Ø§ÛŒØ²Ø± */
    .player-box{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:#181818;
      border-top:3px solid var(--accent);
      padding:10px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      z-index:2000;
    }

    #eq{
      width:100%;
      height:60px;
      background:#000;
      border-radius:6px;
      display:block;
      margin-bottom:5px; /* Ú†Ø³Ø¨ÛŒØ¯Ù‡ Ø¨Ù‡ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ */
    }

    .player-controls{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .player-title{
      flex:1;
      font-size:15px;
      overflow:hidden;
      white-space:nowrap;
      text-overflow:ellipsis;
    }
    .vol{width:140px}

    @media(max-width:900px){
      .cols{flex-direction:column;margin-bottom:220px}
      #eq{height:45px;}
    }
  </style>
</head>
<body>

  <div class="header">ğŸ§ Ø±Ø§Ø¯ÛŒÙˆ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>

  <div class="cols">
    <div class="col">
      <div class="category">ğŸ“Œ ØªØ±Ú©ÛŒ Ùˆ Ø¢Ø°Ø±ÛŒ</div>
      <div class="station-list" id="cat_tr"></div>
    </div>
    <div class="col">
      <div class="category">ğŸ“Œ ÙØ§Ø±Ø³ÛŒ</div>
      <div class="station-list" id="cat_fa"></div>
    </div>
  </div>

  <!-- Ù¾Ù„ÛŒØ± + Ø§Ú©ÙˆÙ„Ø§ÛŒØ²Ø± ÛŒÚ©Ø¬Ø§ -->
  <div class="player-box">
    <canvas id="eq"></canvas>

    <div class="player-controls">
      <div class="player-title" id="nowPlaying">Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</div>
      Ø­Ø¬Ù…:
      <input class="vol" id="volume" type="range" min="0" max="1" step="0.01" value="1">
      <button id="stopBtn">â¹ ØªÙˆÙ‚Ù</button>
    </div>
  </div>

<script>
/* ==========================
   Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ â€” Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ Ø¨Ø§ ØªÙ…Ø§Ù… URLÙ‡Ø§
   ========================== */
const stations = [
  { name:"Radio Shadi", url:"https://ice9.securenetsystems.net/SHADI", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/NRIGBcOzqWFUZZ4dhVZ3bp6oKMftJTpniyrmgru7dZM/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvOGUyZDcwMjUtMmZhMC00MDU5LWFmNGMtMDg0ZjA1NmZjOTk4L2ltYWdlLz91PTE3MDE2OTc1OTEwMDA.webp" },

  { name:"Radio Avang Klap", url:"https://stream.zeno.fm/fpabqr8pd9zuv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/acnY7ntKys9h-2AhQvRWpVDUV0WY3Kh-Jfb8rkjNuH4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNTBmMmVlYjAtNzVkOC00YTllLTlkNWYtZjY1YjkwYjk3MDQ2L2ltYWdlLz91PTE3MzY4NDYwMzEwMDA.webp" },

  { name:"Radio Bamdad", url:"https://192.34.153.102:8000/RadioGL.mp3", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/RI7ZbLc36B1wt2hmlyMxSBwXpETbKBuvcd6coiCjGds/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ1FvLTdyMGdvTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ1E0OGEwaUFnTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY2MDgzMzA4MjAwMA.webp" },

  { name:"Radio Simorgh", url:"https://stream.zeno.fm/9svfnobkrxrvv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/eNYSMBmJNoW6_hcdkosiReSKOx7HHLAn7fP6Tso3DWc/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjAxZGE3MmItNWFhYy00OWU5LWEzN2YtM2IzYjZjZjZmZjQxL2ltYWdlLz91PTE3NjMxNjAxMzcwMDA.webp" },

  { name:"Radio Hamrah", url:"https://stream.zeno.fm/euutwhsru2wtv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/QXH8sr3xE8WGEbYBpaNlPpoAuEMKqcEoFDAZOS_fixI/rs:fill:256:256/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlHd3NTRGxOMFlYUnBiMjVRY205bWFXeGxHSUNBZ0lEUDd0b0tES0lCQkhwbGJtOC9pbWFnZS8_dT0xNjcyMzAxMjY3MDAw.webp" },

  { name:"Radio Yar", url:"https://stream.zeno.fm/oyb5oh6ne3tuv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/kw4YYJRvsl-DswchOsWr3Vtz1MnLY8gfkPAf_FSMgyo/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMWRjZmJjMzktYzM4NS00OTg3LWE5ZTQtYTFiMjE0NDAzZDg3L2ltYWdlLz91PTE3MjgzOTk2MzcwMDA.webp" },

  { name:"Radio Yar Plus", url:"https://stream.zeno.fm/2jwyo983y49vv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/7XCVsr_ZE1q3fpPcrCpQD1prYmMrjHoCWo2u7sHhGYU/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvZDYxZWM4ZjMtZTI1NC00ODBmLWE1NzAtNTZhNjYxYjY0ZTllL2ltYWdlLz91PTE3MzgxNTc4NTMwMDA.webp" },

  { name:"KIRN 670 AM", url:"https://stream.zeno.fm/wyth8w2r3heuv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/YJygcpY0wJ-ORl7yrs57txbWABe87n5INuAERhqfRXk/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F0NWZQcWdvTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0F3TW00akFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY2MTI4MjY5MzAwMA.webp" },

  { name:"Radio Farsi London", url:"https://stream.zeno.fm/c3kkavhhzd0uv", lang:"fa",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/-YxtmG_1FTNyGCT_8g7soWRiEMvzx7HNLWvs57CcbIw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJREFqUHZXa0FnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJRFEybzJKdVFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY3ODA2MTQ1MDAwMA.webp" },

  /* ØªØ±Ú© / Ø¢Ø°Ø±ÛŒ */
  { name:"Arabesk Efsane FM", url:"https://stream.zeno.fm/x5n4sfyy9nhvv", lang:"tr",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/6PGFwWVgLll3f4INzxVqlwdjpOfStwE2wVTFu6GDrzw/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0l6YVR3dndnTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0lfYi1XNFFrTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NTE3MjE5NTAwMA.webp" },

  { name:"Radyo Nostalji", url:"https://stream.zeno.fm/q7zxyx2qsfhvv", lang:"tr",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/C40EP-w5lbCEjhD3OEXoLH0mqT4QAjoi3HcMlrdprM0/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJQ0F4SkdkdkFzTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0k2b3FmX3drTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY4NjQ5NTUzMzAwMA.webp" },

  { name:"Radio Veten", url:"https://stream.zeno.fm/0kgkkzanmueuv", lang:"tr",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/8g8PctmUYIp-MsAb60n1yzr6UB2mIagYYh9OFcI8AO4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvYWd4emZucGxibTh0YzNSaGRITnlNZ3NTQ2tGMWRHaERiR2xsYm5RWWdJREFwdENqdkFzTUN4SU9VM1JoZEdsdmJsQnliMlpwYkdVWWdJQ0FnSUR5aUFvTW9nRUVlbVZ1YncvaW1hZ2UvP3U9MTY3NDE5MDEyNzAwMA.webp" },

  { name:"Ä°znik FM", url:"https://stream.zeno.fm/4crdx4nukrnuv", lang:"tr",
    logo:"https://zeno.fm/_ipx/_/https://images.zeno.fm/cbY5lyYrOd6Dy6Dor1DhLsqTzzfB4I8-0dwyooRgQa4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvNzkwYTBjYjctYTMwMC00ODRjLWI2ZjItMTg5YmNjOWFjNmM1L2ltYWdlLz91PTE3NjI2ODg4ODIwMDA.webp" },

  { name:"NaxÃ§Ä±van Radiosu", url:"http://s33.myradiostream.com:12782/listen.mp3", lang:"tr",
    logo:"https://zeno.fm/_ipx/_/https://images.zenĞ¾.fm/qpsO_iNA8aGqsKrXHX0fUneE_f0gUl1kqYwilPn2HD4/rs:fill:288:288/g:ce:0:0/aHR0cHM6Ly9wcm94eS56ZW5vLmZtL2NvbnRlbnQvc3RhdGlvbnMvMjlmNzI0NTEtOWM2Ny00YzgxLWE0MTMtMWFlODJjYTM2ZWY4L2ltYWdlLz91PTE3MDE2OTY4MDYwMDA.webp" }
];

/* Ø³Ø§Ø®ØªÙ† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ */
const cat_fa = document.getElementById('cat_fa');
const cat_tr = document.getElementById('cat_tr');
const nowPlaying = document.getElementById('nowPlaying');
const volume = document.getElementById('volume');
const stopBtn = document.getElementById('stopBtn');

const audio = new Audio();
audio.crossOrigin = "anonymous";
audio.preload = "none";
audio.volume = 1;

function makeStationElement(st){
  const el=document.createElement('div'); el.className='station';
  const left=document.createElement('div'); left.className='left';
  const meta=document.createElement('div'); meta.className='meta';
  const title=document.createElement('div'); title.className='name'; title.textContent=st.name;
  meta.appendChild(title);

  if(st.logo){
    const img=document.createElement('img'); img.src=st.logo; img.onerror=()=>img.style.display='none';
    left.appendChild(img);
  }
  left.appendChild(meta);

  const btn=document.createElement('button');
  btn.textContent='â–¶ Ù¾Ø®Ø´';
  btn.onclick=e=>{e.stopPropagation();handlePlay(st,btn);}

  el.appendChild(left);
  el.appendChild(btn);
  el.onclick=()=>handlePlay(st,btn);

  return el;
}

stations.forEach(s=>{
  const node=makeStationElement(s);
  if(s.lang==="fa") cat_fa.appendChild(node);
  else cat_tr.appendChild(node);
});

/* Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø®Ø´ */
let currentStation=null;
let currentButton=null;

function handlePlay(st,btn){
  if(currentStation && currentStation.url===st.url && !audio.paused){
    audio.pause();
    btn.textContent='â–¶ Ù¾Ø®Ø´';
    nowPlaying.textContent='Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡';
    return;
  }

  audio.src=st.url;
  audio.play();

  if(currentButton) currentButton.textContent='â–¶ Ù¾Ø®Ø´';
  btn.textContent='â¸ ØªÙˆÙ‚Ù';

  currentStation=st;
  currentButton=btn;
  nowPlaying.textContent='Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´: '+st.name;
}

volume.oninput=()=> audio.volume=parseFloat(volume.value);

stopBtn.onclick=()=>{
  audio.pause();
  if(currentButton) currentButton.textContent='â–¶ Ù¾Ø®Ø´';
  nowPlaying.textContent='Ù‡ÛŒÚ† Ø±Ø§Ø¯ÛŒÙˆÛŒÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡';
};

/* Ø§Ú©ÙˆÙ„Ø§ÛŒØ²Ø± */
const eq=document.getElementById('eq');
const eqCtx=eq.getContext('2d');

function resizeEq(){
  const dpr=window.devicePixelRatio||1;
  const cssH=parseInt(getComputedStyle(eq).height);
  eq.width=window.innerWidth*dpr;
  eq.height=cssH*dpr;
  eqCtx.setTransform(dpr,0,0,dpr,0,0);
}
resizeEq();
window.onresize=resizeEq;

let audioCtx=null, analyser=null, srcNode=null;

function ensureAudioContext(){
  if(audioCtx) return;
  audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  srcNode=audioCtx.createMediaElementSource(audio);
  analyser=audioCtx.createAnalyser();
  analyser.fftSize=256;
  srcNode.connect(analyser);
  analyser.connect(audioCtx.destination);
}

audio.addEventListener('play', ()=>{ try{ensureAudioContext();}catch{} });

function draw(){
  requestAnimationFrame(draw);

  if(!analyser){
    eqCtx.fillStyle="#000";
    eqCtx.fillRect(0,0,eq.width,eq.height);
    return;
  }

  const buffer=analyser.frequencyBinCount;
  const data=new Uint8Array(buffer);
  analyser.getByteFrequencyData(data);

  const w=eq.clientWidth;
  const h=eq.clientHeight;

  eqCtx.fillStyle="#000";
  eqCtx.fillRect(0,0,w,h);

  const barW=(w/buffer)*2.2;
  let x=0;

  for(let i=0;i<buffer;i++){
    let v=(data[i]/255)*h*0.7;
    eqCtx.fillStyle="#00ffa6";
    eqCtx.fillRect(x,h-v,barW,v);
    x+=barW+1;
  }
}
draw();

</script>
</body>
</html>
